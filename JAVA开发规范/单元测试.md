### 单元测试
【强制】好的单元测试必须遵守 AIR 原则。

说明:单元测试在线上运行时，感觉像空气(AIR)一样并不存在，但在测试质量的保障上，却是非常关键的。好的单元测试宏观上来说，具有自动化、独立性、可重复执行的特点。
* A:Automatic(自动化)
* I:Independent(独立性)
* R:Repeatable(可重复) 

【强制】单元测试应该是全自动执行的，并且非交互式的。测试框架通常是定期执行的，执行过程必须完全自动化才有意义。输出结果需要人工检查的测试不是一个好的单元测试。单元测 试中不准使用 System.out 来进行人肉验证，必须使用 assert 来验证。

【强制】保持单元测试的独立性。为了保证单元测试稳定可靠且便于维护，单元测试用例之间 决不能互相调用，也不能依赖执行的先后次序。
反例:method2 需要依赖 method1 的执行，将执行结果做为 method2 的输入。

【强制】对于单元测试，要保证测试粒度足够小，有助于精确定位问题。单测粒度至多是类级别，一般是方法级别。 
说明:只有测试粒度小才能在出错时尽快定位到出错位置。单测不负责检查跨类或者跨系统的 交互逻辑，那是集成测试的领域。

【强制】核心业务、核心应用、核心模块的增量代码确保单元测试通过。 
说明:新增代码及时补充单元测试，如果新增代码影响了原有单元测试，请及时修正。

【推荐】单元测试的基本目标:语句覆盖率达到 70%;核心模块的语句覆盖率和分支覆盖率都 要达到 100%
说明:在工程规约的应用分层中提到的 DAO 层，Manager 层，可重用度高的 Service，都应该 进行单元测试。

【推荐】编写单元测试代码遵守 BCDE 原则，以保证被测试模块的交付质量。
 B:Border，边界值测试，包括循环边界、特殊取值、特殊时间点、数据顺序等。
C:Correct，正确的输入，并得到预期的结果。
 D:Design，与设计文档相结合，来编写单元测试。
 E:Error，强制错误信息输入(如:非法数据、异常流程、非业务允许输入等)，并得 到预期的结果。

【推荐】和数据库相关的单元测试，可以设定自动回滚机制，不给数据库造成脏数据。或者 对单元测试产生的数据有明确的前后缀标识。
正例:在 RDC 内部单元测试中，使用 RDC_UNIT_TEST_的前缀标识数据。

【推荐】在设计评审阶段，开发人员需要和测试人员一起确定单元测试范围，单元测试最好 覆盖所有测试用例(UC)。

【推荐】单元测试作为一种质量保障手段，不建议项目发布后补充单元测试用例，建议在项 目提测前完成单元测试。

【参考】不要对单元测试存在如下误解:
 那是测试同学干的事情。本文是开发手册，凡是本文内容都是与开发同学强相关的。
单元测试代码是多余的。汽车的整体功能与各单元部件的测试正常与否是强相关的。 
单元测试代码不需要维护。一年半载后，那么单元测试几乎处于废弃状态。
 单元测试与线上故障没有辩证关系。好的单元测试能够最大限度地规避线上故障。